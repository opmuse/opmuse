{% import "macros/urls.html" as urls %}

<div class="artist-nav">
    {% if album is defined and album%}
        <div class="remotes remotes_album_nav_{{ album.id }}">
            <div class="sidebar-nav panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <i class="fa fa-volume-up"></i> |
                        {{ album.name }}
                    </h3>
                </div>
                <ul class="list-group">
                    <li class="list-group-item">
                        Album on
                        {%- if remotes_album -%}
                            {% if remotes_album.lastfm and remotes_album.lastfm.url %}
                                <a href="{{ remotes_album.lastfm.url }}">Lastfm</a>,
                            {% endif %}
                        {% endif %}
                        <a href="http://www.discogs.com/search?q={{ album.name|urlencode }}&type=release">
                            Discogs</a>,
                        <a href="https://rateyourmusic.com/search?searchtype=l&searchterm={{ album.name|urlencode }}"
                            title="Rate Your Music">RYM</a>,
                        <a href='http://www.google.com/search?q="{{ album.name|urlencode }}"'>
                            Google</a>,
                        <a href='http://translate.google.com/#auto/en/{{ album.name|urlencode }}'>
                            Google Translate</a>.
                    <li class="list-group-item">
                        {% if remotes_album %}
                            {% if remotes_album.lastfm and remotes_album.lastfm.listeners %}
                                <strong>{{ remotes_album.lastfm.listeners|format_number }}</strong> Lastfm Listeners
                            {% endif %}
                        {% endif %}
                    </li>
                    <li class="list-group-item">
                        {% if remotes_album and remotes_album.lastfm %}
                            {% for tag in remotes_album.lastfm.tags %}
                            <span class="tag label label-primary" title="Lastfm tag, {{ tag }}">
                                <a href="/library/albums?filter=tag&filter_value={{ tag|urlencode }}">{{ tag }}</a>
                            </span>
                            {% endfor %}
                        {% endif %}
                    </li>
                </ul>
            </div>
        </div>
    {% endif %}
    {% if artists %}
        {% for artist in artists %}
            <div class="remotes remotes_artist_nav_{{ artist.id }}">
                {% set remotes_artist = remotes_artists[loop.index0] %}
                <div class="sidebar-nav panel panel-info">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <i class="fa fa-microphone"></i> |
                            {{ artist.name }}
                            {% if remotes_artist is defined and remotes_artist and remotes_artist.musicbrainz and
                                remotes_artist.musicbrainz.country %}
                                <img class="country-icon" title="{{ remotes_artist.musicbrainz.country|country }}"
                                    src="/static/images/country-icons/{{ remotes_artist.musicbrainz.country|lower }}.png">
                            {% endif %}
                        </h3>
                    </div>
                    <ul class="list-group">
                        <li class="list-group-item">
                            Artist on
                            {% if remotes_artist is defined and remotes_artist and remotes_artist.musicbrainz and
                                'official homepage' in remotes_artist.musicbrainz.relations and remotes_artist.musicbrainz.relations['official homepage'] %}
                                <a href="{{ remotes_artist.musicbrainz.relations['official homepage'][0] }}">Official</a>,
                            {% endif %}
                            {% if remotes_artist is defined and remotes_artist %}
                                {% if remotes_artist.lastfm and remotes_artist.lastfm.url %}
                                    <a href="{{ remotes_artist.lastfm.url }}">Lastfm</a>,
                                {% endif %}
                            {% endif %}
                            {% if remotes_artist is defined and remotes_artist and remotes_artist.musicbrainz %}
                                <a href="http://musicbrainz.org/artist/{{ remotes_artist.musicbrainz.id }}">Musicbrainz</a>,
                            {% endif %}
                            {% if remotes_artist is defined and remotes_artist and remotes_artist.musicbrainz and
                                'discogs' in remotes_artist.musicbrainz.relations and remotes_artist.musicbrainz.relations.discogs %}
                                <a href="{{ remotes_artist.musicbrainz.relations.discogs[0] }}">Discogs</a>,
                            {% else %}
                                <a href="http://www.discogs.com/search?q={{ artist.name |urlencode }}&type=artist">
                                    Discogs</a>,
                            {% endif %}
                            <a href="https://rateyourmusic.com/search?searchtype=a&searchterm={{ artist.name|urlencode }}"
                                title="Rate Your Music">RYM</a>,
                            <a href='http://www.google.com/search?q={{ '"' ~ artist.name|urlencode ~ '"' }}'>
                                Google</a>,
                            <a href='http://translate.google.com/#auto/en/{{ artist.name|urlencode }}'>
                                Google Translate</a>.
                        </li>
                        {%- if album is defined and album -%}
                        <li class="list-group-item">
                            Artist and album on
                            <a href="http://www.discogs.com/search?q={{ "artist:'" ~
                                artist.name|urlencode ~ "' " ~ album.name|urlencode }}&type=release">
                                Discogs</a>,
                            <a href="https://rateyourmusic.com/search?searchtype=l&searchterm={{ (artist.name ~
                                ' - ' ~ album.name)|urlencode }}" title="Rate Your Music">RYM</a>,
                            <a href='http://www.google.com/search?q={{ '"' ~ artist.name|urlencode ~
                                '" "' ~ album.name|urlencode ~ '"' }}'>
                                Google</a>.
                        </li>
                        {% endif %}
                        <li class="list-group-item">
                            {% if remotes_artist is defined and remotes_artist %}
                                {% if remotes_artist.lastfm and remotes_artist.lastfm.listeners %}
                                    <strong>{{ remotes_artist.lastfm.listeners|format_number }}</strong> Lastfm Listeners
                                {% endif %}
                            {% endif %}
                        </li>
                        {% if remotes_artist is defined and remotes_artist and remotes_artist.lastfm and remotes_artist.lastfm.tags|count > 0 %}
                            <li class="list-group-item">
                                {% for tag in remotes_artist.lastfm.tags %}
                                <span class="tag label label-primary" title="Lastfm tag, {{ tag }}">
                                    <a href="/library/artists?filter=tag&filter_value={{ tag|urlencode }}">{{ tag }}</a>
                                </span>
                                {% endfor %}
                            </li>
                        {% endif %}
                        {% if remotes_artist is defined and remotes_artist and remotes_artist.lastfm and remotes_artist.lastfm.similar|count > 0 %}
                            <li class="list-group-item">
                                {% for similar in remotes_artist.lastfm.similar %}
                                    <span class="label label-primary" title="Lastfm similar, {{ similar.name }}">
                                        <a href="/{{ similar.slug|urlencode }}">{{ similar.name }}</a>
                                    </span>
                                {% endfor %}
                            </li>
                        {% endif %}
                        {% if remotes_artist is defined and remotes_artist and remotes_artist.discogs.aliases|count > 0 %}
                            <li class="list-group-item">
                                {% for alias in remotes_artist.discogs.aliases %}
                                    <span class="label label-primary" title="Discog Alias, {{ alias }}">
                                        <a href="/search/{{ alias|urlencode }}/artist">{{ alias }}</a>
                                    </span>
                                {% endfor %}
                            </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>
