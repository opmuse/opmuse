<!DOCTYPE html>
<html>
    <head>
        <title>
            {% block title %}{% endblock %} | {{ server_name }}
        </title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link
            rel="stylesheet/less"
            href="/styles/main.css"
            type="text/css" />

        <script
            data-main="/scripts/main"
            src="/scripts/require.js">
        </script>
        <script
            src="/scripts/init.js">
        </script>
    </head>
    <body lang="en">
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="#">opmuse</a>
                    {% if authenticated %}
                        <div class="nav-collapse collapse">
                            <p class="navbar-text pull-right">
                                Logged in as <a href="#" class="navbar-link">{{ request.user.login }}</a>
                            </p>
                            <div class="navbar-search pull-left">
                                <input class="search-query" type="text" placeholder="Search" />
                            </div>
                            <ul class="nav">
                                <li><a href="/">Home</a></li>
                                <li><a href="/library">Library</a></li>
                                <li><a href="/lastfm">Lastfm</a></li>
                                <li><a href="/users">Users</a></li>
                                <li><a href="/upload">Upload</a></li>
                                <li><a href="/logout">Logout</a></li>
                            </ul>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="container-fluid">
            {% block container %}
                <div class="row-fluid">
                    <div class="span4">
                    {% if authenticated %}
                        <div class="well">
                            {% include "player.html" %}
                        </div>
                        <div class="well">
                            <div id="queue"></div>
                        </div>
                        <div class="well">
                            <dl>
                                <dt>Scanning</dt>
                                <dd>{{ 'Yes' if request.library.scanning else 'No' }}</dd>
                                <dt>Invalid</dt>
                                <dd><a href="/invalid_tracks">{{ request.library_dao.get_invalid_track_count() }}</a></dd>
                                <dt>Tracks</dt>
                                <dd>{{ request.library_dao.get_track_count() }}</dd>
                                <dt>Albums</dt>
                                <dd>{{ request.library_dao.get_album_count() }}</dd>
                                <dt>Artists</dt>
                                <dd>{{ request.library_dao.get_artist_count() }}</dd>
                            </dl>
                        </div>
                    {% endif %}
                    </div>
                    <div class="span8">
                        <div id="content">
                            {% block content %}{% endblock %}
                        </div>
                    </div>
                </div>
            {% endblock %}

            <hr>

            <footer>
                <p>&copy; opmuse 2012</p>
            </footer>
        </div>
    </body>
</html>
