<!DOCTYPE html>
<html>
    <head>
        <title>
            {% block title %}{% endblock %} | {{ server_name }}
        </title>

        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />

        <link
            rel="stylesheet/less"
            href="/styles/main.css"
            type="text/css" />

        <script
            data-main="/scripts/main"
            src="/scripts/require.js">
        </script>
        <script
            src="/scripts/init.js">
        </script>
    </head>
    <body lang="en">
        <header>
            <h1>
                <img
                    src="/images/opmuse-logo.png"
                    alt="opmuse"/>
                <small class="server-name">
                    {{ server_name }}
                </small>
            </h1>
        </header>

        <div id="wrapper">
            <div id="menu">
                <ul>
                    <li>
                        <a href="/">
                            <div class="icon home-icon"></div>
                        </a>
                    </li>
                {% if authenticated %}
                    <li>
                        <a href="/library">
                            <div class="icon library-icon"></div>
                        </a>
                    </li>
                    <li>
                        <a href="/lastfm">
                            Lastfm
                        </a>
                    </li>
                    <li>
                        <a href="/users">
                            Users
                        </a>
                    </li>
                    <li>
                        <a href="/upload">
                            Upload
                        </a>
                    </li>
                    <li>
                        <a href="/logout">
                            Logout
                        </a>
                    </li>
                {% endif %}
                </ul>

                {% if authenticated %}
                    {% include "player.html" %}
                {% endif %}
            </div>

            {% if authenticated %}
            <div id="header-content">
                <div class="search">
                    <input id="search" type="text" placeholder="Search" />
                </div>
                <div class="library">
                    <dl>
                        <dt>Scanning</dt>
                        <dd>{{ 'Yes' if request.library.scanning else 'No' }}</dd>
                    </dl>
                    <dl>
                        <dt>Invalid</dt>
                        <dd>
                            <a href="/invalid_tracks">
                                {{ request.library_dao.get_invalid_track_count() }}
                            </a>
                        </dd>
                    </dl>
                    <dl>
                        <dt>Tracks</dt>
                        <dd>{{ request.library_dao.get_track_count() }}</dd>
                    </dl>
                    <dl>
                        <dt>Albums</dt>
                        <dd>{{ request.library_dao.get_album_count() }}</dd>
                    </dl>
                    <dl>
                        <dt>Artists</dt>
                        <dd>{{ request.library_dao.get_artist_count() }}</dd>
                    </dl>
                </div>
            </div>
            {% endif %}

            <div id="primary-content">
                <div id="content">
                    {% block content %}{% endblock %}
                </div>
            </div>

            <div id="secondary-content">
                {% if authenticated %}
                    <div id="queue"></div>
                {% endif %}
            </div>

        </div>
    </body>
</html>
