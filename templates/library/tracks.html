{% extends "body_twocol.html" %}

{% set subnav_file_path = "partials/library-nav.html" %}

{% import "macros/tracks.html" as tracks_macros %}
{% import "macros/pagination.html" as pagination %}
{% import "macros/filters.html" as filters %}

{% block title  %}
    Library - Tracks
{% endblock %}

{% set sort_labels = {
    "created": "Created",
    "added": "Recently added",
    "random": "Random",
} %}

{% set filter_labels = {
    "none": "Nothing",
    "invalid": "Invalid",
    "woartist": "Without artist",
    "woalbum": "Without album ",
    "duplicates": "Duplicates",
} %}

{% block right %}
<div class="filters">
    <h4>Sort by</h4>
    {{ filters.sort('asterisk', sort_labels['created'], 'created', filter, None, sort, None) }}
    {{ filters.sort('asterisk', sort_labels['added'], 'added', filter, None, sort, None) }}
    {{ filters.sort('random', sort_labels['random'], 'random', filter, None, sort, None) }}
    <h4>Filter by</h4>
    {{ filters.filter('circle-o', filter_labels['none'], 'none', filter, None, sort, None) }}
    {{ filters.filter('exclamation-triangle', filter_labels['invalid'], 'invalid', filter, None, sort, None) }}
    {{ filters.filter('microphone-slash', filter_labels['woartist'], 'woartist', filter, None, sort, None) }}
    {{ filters.filter('volume-off', filter_labels['woalbum'], 'woalbum', filter, None, sort, None) }}
    {{ filters.filter('code-fork', filter_labels['duplicates'], 'duplicates', filter, None, sort, None) }}
</div>
{% endblock %}

{% block content %}
<div id="library">

    {{ filters.text("tracks", filter_labels[filter]|lower if filter != "none" else None,
        sort_labels[sort]|lower, None, page, page_size, total) }}

    <div class="tracks">
        {{ tracks_macros.table(tracks) }}
    </div>

    {% if page %}
        {% set url = "/library/tracks?sort=" + sort + "&filter=" + filter + "&page=" %}
        {{ pagination.pagination(url, page, pages) }}
    {% endif %}
</div>
{% endblock %}
