{% extends "body.html" %}

{% block title  %}
    Search
{% endblock %}

{% block navbar_sub %}
    {% include "partials/library-nav.html" %}
{% endblock %}

{% block content %}

{% import "macros/media.html" as media %}
{% import "macros/edit-dropdown.html" as edit_dropdown %}

<div id="search" data-query="{{ query|e }}">
    <div class="row">
        <div class="col-xs-7">
            <p class="result-text">
                {% if query %}
                    Showing matches for <strong>{{ query }}</strong> on artists, albums and tracks
                    presented with their full hierarchy. Use buttons on the right to perform various actions on tracks related to
                    these results.
                {% else %}
                    No query.
                {% endif %}
            </p>
        </div>
        <div class="col-xs-5">
            <div class="edit-buttons">
                {% if artist_tracks %}
                    {{ edit_dropdown.dropdown(artist_tracks, "Tracks in Artists") }}
                {% endif %}
                {% if album_tracks %}
                    {{ edit_dropdown.dropdown(album_tracks, "Tracks in Albums") }}
                {% endif %}
                {% if track_tracks %}
                    {{ edit_dropdown.dropdown(track_tracks, "Tracks") }}
                {% endif %}
            </div>
        </div>
    </div>

    <div class="clear"></div>

    <hr />

    <div class="row">
        <div class="col-xs-7">
            <div class="results">
                {% if hierarchy %}
                    {{ media.hierarchy(hierarchy) }}
                {% endif %}
            </div>
        </div>
        <div class="col-xs-5">
            <div class="result-stats panel panel-default sidebar-nav">
                <div class="panel-heading">
                    <h3 class="panel-title">Statistics</h3>
                </div>
                <ul class="list-group">
                    <li class="list-group-item">
                        <dl class="dl-horizontal">
                            <dt>Artists</dt>
                            <dd>{{ artists|length|format_number }}</dd>
                            <dt>Albums</dt>
                            <dd>{{ albums|length|format_number }}</dd>
                            <dt>Tracks</dt>
                            <dd>{{ tracks|length|format_number }}</dd>
                            <dt>Total</dt>
                            <dd>{{ (tracks|length + artists|length + albums|length)|format_number }}</dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
