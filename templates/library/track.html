{% extends "body_twocol.html" %}
{% set subnav_file_path = "partials/library-nav.html" %}

{% block title  %}
    {% if track.artist %}
        {{ track.artist.name|show_ws }} -
    {% endif %}
    {% if track.album %}
        {{ track.album.name|show_ws }} -
    {% endif %}
    {{ track.name|show_ws }}
{% endblock %}

{% block right %}
    {% set album = track.album %}
    {% if remotes_artist %}
        {% set remotes_artists = [remotes_artist] %}
    {% else %}
        {% set remotes_artists = None %}
    {% endif %}
    {% if track.artist %}
        {% set artists = [track.artist] %}
    {% else %}
        {% set artists = None %}
    {% endif %}
    {% include "partials/artist-nav.html" %}
{% endblock %}

{% block content %}
{% import "macros/edit-dropdown.html" as edit_dropdown %}
{% import "macros/tracks.html" as tracks %}
<div id="track">
    {% set album = track.album %}
    {% if track.artist %}
        {% set artists = [track.artist] %}
    {% else %}
        {% set artists = None %}
    {% endif %}

    {% include "partials/artist-head.html" %}

    <hr>

    <div class="btn-container">
        <div class="btn-group queue-btn">
            <a
                class="queue add btn-sm btn btn-default"
                title="Queue all"
                href="/queue/add/{{ track.id }}">
                <i class="fa fa-headphones"></i>
            </a>
        </div>

        {{ edit_dropdown.dropdown([track]) }}
    </div>

    <div class="clear"></div>

    <table class="table table-striped table-bordered table-condensed">
        <tr>
            <th>Invalid</th>
            <td>
                {% if track.invalid %}
                    {{ tracks.invalid_label(track.invalid) }}
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Artist</th>
            <td>
                {% if track.artist %}
                    {{ track.artist.name|show_ws }}
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Album</th>
            <td>
                {% if track.album %}
                    {{ track.album.name|show_ws }}
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Track</th>
            <td>{{ track.name|show_ws }}</td>
        </tr>
        <tr>
            <th>Number</th>
            <td>
                {% if track.number %}
                    {{ track.number }}
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Disc</th>
            <td>
                {% if track.disc %}
                    {{ track.disc }}
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Duration</th>
            <td>
                {{ track.duration|format_seconds }}
            </td>
        </tr>
        <tr>
            <th>Format</th>
            <td>{{ track.format }}</td>
        </tr>
        <tr>
            <th>Bitrate</th>
            <td>
                {% if track.bitrate %}
                    {{ (track.bitrate / 1024) | format_number }} kbits/s
                {% else %}
                    N/A
                {% endif %}
                {% if track.low_quality %}
                    <span class="label label-warning"
                        title="Track is of low quality, consider replacing it.">
                        <i class="fa fa-thumbs-down"></i>
                    </span>
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Mode</th>
            <td>{{ track.mode if track.mode else "N/A" }}</td>
        </tr>
        <tr>
            <th>Sample Rate</th>
            <td>
                {% if track.sample_rate %}
                    {{ track.sample_rate|format_number }} Hz
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Size</th>
            <td>{{ track.size|format_bytes }}</td>
        </tr>
        <tr class="hash">
            <th>Hash</th>
            <td>{{ track.hash.decode('utf8') }}</td>
        </tr>
        <tr>
            <th>Uploaded by</th>
            <td>
                {% if track.upload_user %}
                    <a href="/users/user/{{ track.upload_user.login }}">
                        {{ track.upload_user.login }}
                    </a>
                {% else %}
                    N/A
                {% endif %}
            </td>
        </tr>
    </table>
    {% if track.has_dups %}
        <p class="alert alert-warning">
            Track has exact duplicates (e.g. the same hash), you could remove all but one of them.
        </p>
    {% endif %}
    <table class="table table-striped table-bordered table-condensed">
        <tr>
            <th>File</th>
            <th>Modified</th>
        </tr>
        {% for path in track.paths %}
            <tr>
                <td>
                    {{ path.pretty_path }}
                </td>
                <td>
                    {{ path.path_modified }}
                </td>
            </tr>
        {% endfor %}
    </table>

</div>
{% endblock %}

